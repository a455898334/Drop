<!DOCTYPE HTML>
<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
<link rel="stylesheet" type="text/css" href="../static/style.css" />
<link rel="stylesheet" type="text/css" href="../static/Home.css" />
<script src="../static/jquery.js" type="text/javascript"></script>
<script src="../static/scripts.js" type="text/javascript"></script>
<script type="text/javascript"    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAH35jXY2Yb5eApUzvZXuObiwFOpTC9xu0&sensor=true"> </script>
<script src="../static/map.js" type="text/javascript"></script>

<form method="POST">

<table id="tbl" border="0">
	<tr>
	
<!-- onclick="PreSubmit(this.form)" -->
		<td width=80>
			<input id="drop" type="submit" name="button" value="Drop" />
		</td>
		<td width=80>
			<input id="browse" type="submit" name="button" value="Browse" />
		</td>
		<td width=80>	
			<input type="submit" name="button" value="Map" />
		</td>
		<td width=80>	
			<input type="submit" name="button" value="Account"/>
		</td>
		<td width=80>	
			<input type="submit" name="button" value="Logout" />
		</td>
	</tr>
</table>


	 <input type="hidden" id="Latitude" name="Latitude" value={{Longitude}} />
	 <input type="hidden" id="Longitude" name="Longitude" value={{Longitude}} />	


<!--				PAGE 1					 -->
{% if page == "Drop"  %}
<div id = "droppg">
	 <textarea rows="6" cols="40" name="line"></textarea>
	 <input type="submit" name="button" value="Create Message" />
</div>
{% endif %}
<!--				PAGE 2					 -->
{% if page == "Browse"  %}
<div id="scan">
	{% if messages %}
		<table border="1">
			<tr>
				<th>User</th>
				<th>Message</th>
			</tr>
		{% for x in messages %}
		 <tr>
		 	<td>Not yet implemented</td>
		 	<td>{{x}}</td>
		 </tr>
		{% endfor %}
		</table>
	{% else %}
		<h1>NO MESSAGES WITHIN AREA</h1> 
	{% endif %}
</div>
	
{% endif %}
</form>
<!--				PAGE 3					 -->
{% if page == "Map" %}
  <body bgcolor="#000000" onload="initialize()" >
    <div id="map_canvas" style="width: 60%; height:80%"></div>

  </body>
{% endif %}


<!--				PAGE 4					 -->
{% if page == "Account" %}
<h1>UNDER CONSTRUCTION</h1>
{% endif %}



	
 <script src="../static/Home.js" type="text/javascript">
<script>
var map;
var markersArray = [];
var newMark;

function initialize() {
	var a = new google.maps.LatLng(40.731649,-73.923269);
	var mapOptions = {
		zoom: 12	,
		center: a,
		mapTypeId: google.maps.MapTypeId.HYBRID
	};
	map =  new google.maps.Map(document.getElementById("map_canvas"), mapOptions);
	{% for x in MessageList %}
	newMark = new google.maps.LatLng({{x[1]}},{{x[0]}});
	addMarker(newMark, "{{x[2]}}")	;
	{% endfor %}
	infowindow = new google.maps.InfoWindow({  	content: "holding..."  });
	for (var i = 0; i < markersArray.length; i++) {
  	  var marker = markersArray[i];
  	  google.maps.event.addListener(marker, 'click', function () {
  	  	infowindow.setContent(this.user);
		infowindow.open(map, this);
		map.setCenter(this.getPosition());
	  });	 
	}
	
}
</script>

